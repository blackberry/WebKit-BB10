<html>
<head>
<meta name="viewport" content="height=10"/>
<style>
body { margin: 0; padding: 0; }
#test-container { background-color: yellow; width: 100%; }
#square { background-color: blue; max-width: 450px; height: 450px}
p, ol { width: 290px; font-size: x-small; color: white; }

</style>
<script src="resources/meta-viewport-utilities.js"></script>
<script>
function updateOrientation() {
    var body = document.body;
    var width = parseInt(getComputedStyle(body).width, 10);
    var result = document.getElementById("result");

    logStart(result);
    log(result, "screen.width: " + screen.width);
    log(result, "actual width: " + width);
    logResultAndNotifyDone(result, width === screen.width);
}

window.onorientationchange = updateOrientation;
window.onload = updateOrientation;
window.onresize = updateOrientation;
</script>
<body>
<!-- See: http://developer.apple.com/safari/library/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html -->
<div id="test-container">
    <div id="square">
        <p>This tests that the width of the viewport is inferred from the orientation of the device.</p>
        <p>Test 1: In portrait orientation:</p>
        <ol>
            <li>If there is any yellow in the background of this page then this test FAILED. Otherwise, it PASSED.</li>
        </ol>
        <p>Test 2: In landscape orientation:</p>
        <ol>
            <li>If the background of this page is partly blue and partly yellow (may not be of the same proportion) then this test PASSED. Otherwise, it FAILED.</li>
        </ol>
        <p id="result"></p>
    </div>
</div>
</body>
</html>
